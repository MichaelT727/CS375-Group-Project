:root{
  --bg:#f6f8fb; --panel:#fff; --text:#1f2937; --muted:#6b7280; --border:#e5e7eb;
  --accent:#0ea5e9; --accent-2:#10b981; --danger:#ef4444; --ring:rgba(14,165,233,.35);
  --shadow:0 10px 24px rgba(2,6,23,.08); --shadow-soft:0 6px 14px rgba(2,6,23,.06);
  --brand:#2563eb; --brand-2:#3b82f6;
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  color:var(--text);
  background: radial-gradient(60rem 60rem at 120% -10%, #c7f9ff40 0, transparent 60%),
             radial-gradient(60rem 60rem at -20% -20%, #e6fffa50 0, transparent 60%), var(--bg);
}

.hero{max-width:1320px;margin:10px auto 0;padding:12px 20px 0;text-align:center}
.hero-title{
  margin:0; font-size:clamp(28px,4.2vw,44px); font-weight:800; line-height:1.1; letter-spacing:.2px;
  background:linear-gradient(90deg,var(--brand),var(--brand-2)); -webkit-background-clip:text; background-clip:text; color:transparent;
}
.hero-sub{margin:0;color:var(--muted);font-size:14px}

.layout{
  max-width:1320px; margin:0 auto; padding:8px 20px 16px;
  display:grid; grid-template-columns:minmax(560px,1.7fr) minmax(380px,1fr); gap:20px; align-items:stretch;
}
@media (max-width:1100px){ .layout{grid-template-columns:1fr} }
.map-wrap,.list-wrap{height:78vh;background:var(--panel);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}

.map-wrap{ position:relative; }

#map{height:calc(100% - 42px);width:100%}
.hint{padding:10px 12px;border-top:1px solid var(--border);color:var(--muted);font-size:14px;background:#fbfdff}

.map-search{
  position:absolute; top:12px; left:12px; right:auto; z-index:5;
  display:flex; gap:8px; align-items:center;
  background:#ffffffcc; backdrop-filter:saturate(1.2) blur(2px);
  border:1px solid var(--border); border-radius:12px; padding:8px; box-shadow:var(--shadow-soft);
}
.map-search input{
  width:280px; max-width:56vw;
  padding:9px 12px; border:1px solid var(--border); border-radius:10px; outline:none; background:#fff; color:var(--text);
}
.map-search input:focus{ border-color:#a5d8ff; box-shadow:0 0 0 4px var(--ring); }

.list-wrap{display:flex;flex-direction:column}
.list-header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 16px;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:1;background:var(--panel)}
.list-header h2{margin:0;font-size:16px;font-weight:700}
.list-actions{display:flex;gap:8px;align-items:center}
.count-pill{display:inline-block;margin-left:6px;padding:2px 8px;font-size:12px;color:#0369a1;background:#ecfeff;border:1px solid #bae6fd;border-radius:999px}
.plan-list{padding:10px 12px 16px;overflow:auto;flex:1}
.empty-state{color:var(--muted);font-size:14px;border:1px dashed var(--border);border-radius:12px;padding:16px;text-align:center;margin:8px 4px;background:#f9fbff}

.plan-list::-webkit-scrollbar{width:10px}
.plan-list::-webkit-scrollbar-thumb{background:#e2e8f0;border-radius:10px;border:2px solid #f8fafc}
.plan-list{scrollbar-width:thin;scrollbar-color:#e2e8f0 transparent}

.item{
  display:grid; grid-template-columns:76px 1fr; gap:10px;
  border:1px solid var(--border); border-radius:12px; margin:8px 4px; padding:10px;
  background:linear-gradient(180deg,#fff,#fdfefe); box-shadow:var(--shadow-soft);
  cursor:grab; transition:box-shadow .15s, transform .08s, background .15s;
}
.item:hover{box-shadow:0 8px 18px rgba(2,6,23,.08)} .item:active{cursor:grabbing}
.item.dragging{opacity:.7;transform:scale(.998)} .item.drag-over{outline:2px dashed var(--accent);outline-offset:4px;background:#f2fbff}

.left-col{display:flex;flex-direction:column;align-items:center;gap:8px;padding-top:2px}
.badge{align-self:center;background:#ecfeff;color:#0369a1;border:1px solid #bae6fd;padding:6px 10px;min-width:44px;text-align:center;border-radius:999px;font-weight:700;letter-spacing:.3px}

.meta{display:flex;flex-direction:column;gap:6px}
.addr{font-weight:700}
.coords{color:var(--muted);font-size:13px}

.name-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.name-display{padding:6px 10px;border:1px solid var(--border);border-radius:8px;background:#f8fafc;cursor:pointer}
.name-input{padding:9px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text);min-width:240px;outline:none}
.name-input:focus{border-color:#a5d8ff;box-shadow:0 0 0 4px var(--ring)}

.notes-collapsed{display:flex;align-items:center;gap:10px;margin-top:6px}
.notes-preview{color:var(--muted);font-size:13px;background:#f8fafc;border:1px solid var(--border);border-radius:8px;padding:8px 10px}
.link-btn{appearance:none;border:0;background:transparent;padding:0;font-size:13px;color:#2563eb;cursor:pointer}
.link-btn:hover{text-decoration:underline}
.notes-row{display:flex;flex-direction:column;gap:8px;margin-top:6px}
.notes-input{width:100%;min-height:84px;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text);outline:none;resize:vertical}
.notes-input:focus{border-color:#a5d8ff;box-shadow:0 0 0 4px var(--ring)}
.notes-actions{display:flex;justify-content:flex-end;gap:8px}

.btn{appearance:none;padding:9px 13px;border-radius:12px;border:1px solid var(--border);background:#fff;color:var(--text);cursor:pointer;transition:transform .08s, background .15s, box-shadow .15s, border-color .15s}
.btn:hover{transform:translateY(-1px);box-shadow:var(--shadow-soft)}
.btn:focus-visible{outline:0;box-shadow:0 0 0 4px var(--ring)}
.btn:disabled{opacity:.55;cursor:not-allowed}
.btn.sm{padding:6px 10px;border-radius:10px;font-size:13px}
.btn.primary{background:linear-gradient(180deg,#e0f2ff,#c8ecff);border-color:#bfe3ff;color:#075985}
.btn.primary:hover{background:linear-gradient(180deg,#d7eeff,#bde6ff)}
.btn.success{background:linear-gradient(180deg,#dcfce7,#c9f5db);border-color:#a7f3d0;color:#065f46}
.btn.success:hover{background:linear-gradient(180deg,#d0fae0,#bbf1d2)}
.btn.ghost{background:transparent;border-color:var(--border);color:var(--text)}
.btn.danger{background:linear-gradient(180deg,#fee2e2,#ffd9d9);border-color:#fecaca;color:#7f1d1d}
.btn.danger:hover{background:linear-gradient(180deg,#ffdede,#ffd0d0)}
.btn.outline-danger{background:#fff;color:#b91c1c;border-color:#fecaca}
.btn.outline-danger:hover{background:#fff5f5;box-shadow:var(--shadow-soft)}

.icon-btn{
  display:inline-grid;place-items:center;width:36px;height:36px;border-radius:10px;border:1px solid var(--border);
  background:#fff;color:#64748b;cursor:pointer;transition:transform .08s, box-shadow .15s, background .15s, border-color .15s, color .15s;
}
.icon-btn:hover{transform:translateY(-1px);box-shadow:var(--shadow-soft)}
.icon-btn:focus-visible{outline:0;box-shadow:0 0 0 4px var(--ring)}
.icon-btn.danger:hover{background:#fff5f5;border-color:#fecaca;color:#b91c1c}

.infobox{min-width:260px;max-width:360px;font-size:14px}
.infobox .title{font-weight:700;margin-bottom:6px}
.infobox .small{color:var(--muted);font-size:12px;margin-bottom:10px}
.infobox .row{display:flex;gap:8px}
.infobox .row .btn{flex:1}